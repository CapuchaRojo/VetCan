generator client {
provider = "prisma-client-js"
}


datasource db {
provider = "postgresql"
url = env("DATABASE_URL")
}


model Patient {
id String @id @default(uuid())
firstName String
lastName String
phone String @unique
email String?
dob DateTime?
isVeteran Boolean @default(false)
createdAt DateTime @default(now())
updatedAt DateTime @updatedAt
appointments Appointment[]
calls Call[]
}


model Appointment {
id String @id @default(uuid())
patient Patient @relation(fields: [patientId], references: [id])
patientId String
doctorId String // replaces providerId (clear semantics)
startTime DateTime
endTime DateTime
status AppointmentStatus @default(SCHEDULED)
createdAt DateTime @default(now())
@@index([doctorId, startTime, endTime])
}

enum AppointmentStatus {
SCHEDULED
CANCELLED
COMPLETED
}


model Call {
id String @id @default(uuid())
patient Patient? @relation(fields: [patientId], references: [id])
patientId String?
callSid String? @unique
direction String
startedAt DateTime?
endedAt DateTime?
recording String?
}


model Agent {
id String @id @default(uuid())
name String
email String @unique
role String
createdAt DateTime @default(now())
}
