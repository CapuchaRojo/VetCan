version: '3.9'
services:
api:
build:
context: ./infra
dockerfile: Dockerfile.api
env_file: .env
ports:
- '4000:4000'
volumes:
- ./api:/usr/src/app
depends_on:
- db
- redis


worker:
build:
context: ./infra
dockerfile: Dockerfile.worker
env_file: .env
volumes:
- ./worker:/usr/src/worker
depends_on:
- redis
- api


web:
build:
context: ./infra
dockerfile: Dockerfile.web
env_file: .env
ports:
- '5173:5173'
volumes:
- ./web:/usr/src/web
depends_on:
- api


db:
image: postgres:15
environment:
POSTGRES_USER: vetcan
POSTGRES_PASSWORD: vetcanpass
POSTGRES_DB: vetcan
volumes:
- db_data:/var/lib/postgresql/data


redis:
image: redis:7
ports:
- '6379:6379'


volumes:
db_data:
